{"ts":1371062678927,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var express = require('express'),\n    app = express()\n  , server = require('http').createServer(app)\n  , io = require('socket.io').listen(server);\n  \nvar cursors = require('./cursors.js');\n\nserver.listen(process.env.PORT, process.env.IP);\n\napp.configure(function(){\n    // app.use(express.logger());\n    app.use(express.static(__dirname + '/public'));  \n});\n\nvar clients = {};\n\nio.sockets.on('connection', function (socket) {\n\n    var myself = {\n        cursor: cursors.nextCursor()\n    };\n    clients[socket.id] = myself;\n\n    io.sockets.emit('clients', clients);\n\n    socket.emit('myself', myself);\n  \n    socket.on('move', function(data) {\n        //console.log(\"socket: \" + socket.id + \" recieved: \" + data);\n        data['from'] = socket.id\n        socket.broadcast.emit('move', data);\n    })\n    \n    socket.on('disconnect', function () {\n        delete clients[socket.id];\n        socket.broadcast.emit('disconnect', socket.id);\n        io.sockets.emit('clients', clients);\n    });    \n});\n"]],"start1":0,"start2":0,"length1":0,"length2":997}]],"length":997}
